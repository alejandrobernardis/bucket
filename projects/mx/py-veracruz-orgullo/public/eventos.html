<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="es-MX"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="es-MX"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="es-MX"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="es-MX"><!--<![endif]-->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>#OrgulloJarocho</title>
    <meta name="description" content="El Orgullo jarocho es tener el alma llena de alegr&iacute;a, presumir la hermosura de nuestro Estado, tomarse un caf&eacute; y despu&eacute;s rumbear hasta terminar la fiesta; porque ser jarocho es saber que Veracruz es Mi Estado Ideal.">
    <meta name="author" content="(c) Estado de Veracruz, 2013. Todos los derechos reservados.">
    <meta name="country" content="MX">

    <meta property="og:title" content="#OrgulloJarocho">
    <meta property="og:description" content="El Orgullo jarocho es tener el alma llena de alegr&iacute;a, presumir la hermosura de nuestro Estado, tomarse un caf&eacute; y despu&eacute;s rumbear hasta terminar la fiesta; porque ser jarocho es saber que Veracruz es Mi Estado Ideal.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://orgullojarocho.mx">
    <meta property="og:image" content="http://orgullojarocho.mx/static/img/facebook.jpg">
    <meta property="og:site_name" content="#OrgulloJarocho">


    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="index, follow">
    <meta name="revisit-after" content="30 days">
    <meta name="google-site-verification" content="Jd7A00Wh9i5RgVewmhwZPfRvZ48mZyJBfkAeTdYVv7k" />

    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
    <link rel="shortcut icon" href="/favicon.ico">

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-fixes.min.css" rel="stylesheet">

    <link type="text/plain" rel="author" href="/humans.txt" />

    <!--[if lt IE 9]>
    <script src="/static/js/html5.js"></script>
    <![endif]-->

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37241779-2']);
        _gaq.push(['_setDomainName', 'orgullojarocho.mx']);
        _gaq.push(['_trackPageview']);
        (function(){
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>
<body class="eventos">
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="#" class="brand js-ga-track" data-url="/" data-category="header" data-action="click" data-label="logo">#OrgulloJarocho</a>
            <div class="nav-collapse collapse">
                <ul class="nav pull-right">
                    <li class="menu-destiny">
                        <a href="#" class="js-ga-track" data-url="/" data-category="header-menu" data-action="click" data-label="destinos">DESTINOS</a>
                    </li>
                    <li class="menu-events active">
                        <a href="#" class="js-ga-track" data-url="/eventos.html" data-category="header-menu" data-action="click" data-label="eventos">EVENTOS</a>
                    </li>
                    <li class="menu-maps">
                        <a href="#" class="js-ga-track" data-url="/mapa.html" data-category="header-menu" data-action="click" data-label="mapa">MAPA</a>
                    </li>
                    <li class="menu-contact">
                        <a href="#" class="js-ga-track" data-url="/contacto.html" data-category="header-menu" data-action="click" data-label="contacto">CONTACTO</a>
                    </li>
                    <li class="menu-youtube">
                        <a href="#" class="js-ga-track" data-url="http://www.youtube.com" data-category="header-menu" data-action="click" data-label="youtube">
                            <i class="icon-extra-yt">YouTube</i>
                        </a>
                    </li>
                    <li class="menu-twitter">
                        <a href="#" class="js-ga-track" data-url="https://twitter.com/Orgullo_Jarocho" data-category="header-menu" data-action="click" data-label="twitter">
                            <i class="icon-extra-tw">Twitter</i>
                        </a>
                    </li>
                    <li class="menu-facebook">
                        <a href="#" class="js-ga-track" data-url="https://www.facebook.com/pages/Orgullo-Jarocho/415666895153618" data-category="header-menu" data-action="click" data-label="facebook">
                            <i class="icon-extra-fb">Facebook</i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="js-alert alert-fixes"></div>

<div class="content">
    <div class="container">
        <div class="row">
            <div class="events-time span2">
                <div class="events-time-fix">
                <h1 class="events-time-year">2013</h1>
                <ul class="events-time-months">
                    <li class=""><a href="#" class="js-ga-track" data-url="#enero" data-category="events-menu-months" data-action="click" data-label="ene">ENERO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#febrero" data-category="events-menu-months" data-action="click" data-label="feb">FEBRERO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#marzo" data-category="events-menu-months" data-action="click" data-label="mar">MARZO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#abril" data-category="events-menu-months" data-action="click" data-label="abr">ABRIL</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#mayo" data-category="events-menu-months" data-action="click" data-label="may">MAYO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#junio" data-category="events-menu-months" data-action="click" data-label="jun">JUNIO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#julio" data-category="events-menu-months" data-action="click" data-label="jul">JULIO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#agosto" data-category="events-menu-months" data-action="click" data-label="ago">AGOSTO</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#septiembre" data-category="events-menu-months" data-action="click" data-label="sep">SEPTIEMBRE</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#octubre" data-category="events-menu-months" data-action="click" data-label="oct">OCTUBRE</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#noviembre" data-category="events-menu-months" data-action="click" data-label="nov">NOVIEMBRE</a></li>
                    <li class=""><a href="#" class="js-ga-track" data-url="#diciembre" data-category="events-menu-months" data-action="click" data-label="dic">DICIEMBRE</a></li>
                </ul>
                <div class="clearfix"></div>
                </div>
            </div>
            <div class="events-list span10">
                <div id="row-items-1" class="row-items first"></div>
                <div id="row-items-2" class="row-items"></div>
                <div id="row-items-3" class="row-items last"></div>
                <div class="clearfix"></div>
            </div>

        </div>
    </div>
</div>

<div class="navbar navbar-fixed-bottom">
    <div class="navbar-inner">
        <div class="container-fluid">
            <p class="veracruz-legal pull-left">Orgullo Jarocho Copyright &copy; 2013 Todos los derechos reservados \ <a href="#" class="js-ga-track" data-url="/politicas.html" data-category="footer" data-action="click" data-label="politicas_de_privacidad">Pol&iacute;ticas de Privacidad</a></p>
            <p class="pull-right"><a href="#" class="veracruz-logo js-ga-track" data-url="http://veracruz.mx" data-category="footer" data-action="click" data-label="veracruz_mi_estado_ideal">Veracruz, mi estado ideal</a>
        </div>
    </div>
</div>

<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

<script type="text/javascript">
    (function(){
        var item_tmpl = '<div id="{1}" class="event-item">'
            +'<img src="{2}" alt="{3}">'
            +'<div class="event-item-data">'
            +'<h3 class="">{4}</h3>'
            +'<p><b>Fecha:&nbsp;</b>{5}</p>'
            +'<p><b>Lugar:&nbsp;</b>{6}</p>'
            +'<p><b>Web:&nbsp;</b>{7}</p>'
            +'<p><b>Tel&eacute;fono:&nbsp;</b>{8}</p></div>'
            +'<a class="smart-news-button"><i class="icon-extra-smartnews"></i>SMART NEWS</a></div>',
        item_tmpl_url = '<a href="#" class="js-ga-track" data-url="{1}" data-category="{2}" data-action="{3}" data-label="{4}">{5}</a>';

        var items_list = $('.events-list'),
            months_list = $('.events-time-months'),
            current_year = $('.events-time-year'),
            row_items_1 = $('#row-items-1'),
            row_items_2 = $('#row-items-2'),
            row_items_3 = $('#row-items-3');

        var e_not_found = 'No hay lista de eventos disponibles en este momento.';

        /* === */

        var track_links = function(e){
            try{
                var ref = $(this);
                var url = ref.attr('data-url')||null;
                var dat = ['_trackEvent',
                    ref.attr('data-category')||"category-undefined",
                    ref.attr('data-action')||"action-undefined",
                    ref.attr('data-label')||"label-undefined"];
                _gaq.push(dat);
                if(url){
                    if(url.search(/^\#/gi) > -1){
                        get_data('/data/events/'+year+'/'+url.replace('#','')+'.json');
                    } else if((ref.attr('target')||'').toLowerCase()=='_blank'){
                        window.open(url,'_blank');
                    } else{
                        setTimeout('document.location="'+url+'"',100);
                    }
                }
            }catch(e){}
        };

        /* === */

        var alert_ref = $('.js-alert');

        var alert_tmpl = '<div class="alert alert-{type}">'
                + '<button type="button" class="close" data-dismiss="alert">&times;</button>'
                + '{message}'
                + '</div>';

        var alert_remove = function(){
            try{
                alert_ref.empty();
                alert_ref.hide();
            }catch(e){}
            return alert_ref;
        };

        var _alert = function(type, message){
            var ref = alert_remove();
            if(!ref){return;}
            var tmpl = alert_tmpl.replace('{type}', type).replace('{message}', message);
            ref.append(tmpl).show();
            if(type == 'success'){ref.delay(1500).fadeOut(400);}
        };

        /* === */

        var substitute =  function(value){
            var pos, args = Array.prototype.slice.call(arguments);
            args.shift();
            if(!args.length){return value;}
            while(args.length){
                pos = args.length;
                value = value.replace('{'+(pos)+'}', args[pos-1]);
                args.pop();
            } return value;
        };

        var reset_events = function(){
            alert_remove();
            row_items_1.empty();
            row_items_2.empty();
            row_items_3.empty();
        };

        var reset_months = function(){
            months_list.children().each(function(k,v){
                $(v).removeClass('active');
            });
        };

        //'enero':1,'febrero':2,'marzo':3,'abril':4,'mayo':5,'junio':6,'julio':7,'agosto':8,'septiembre':9,'octubre':10,'noviembre':11,'diciembre':12,

        var get_month_by_id = function(value){
            var dict = {'1':'enero','2':'febrero','3':'marzo','4':'abril','5':'mayo','6':'junio','7':'julio','8':'agosto','9':'septiembre','10':'octubre','11':'noviembre','12':'diciembre'};
            return dict[value.toString()] || 'enero';
        };

        var set_month_by_id = function(value){
            var ref, url,
                str = get_month_by_id(value);
            months_list.children().each(function(k,v){
                ref = $(v);
                url = ref.find('a').attr('data-url').replace('#','').toLowerCase();
                if(str.indexOf(url) > -1){ref.addClass('active');return false;}
            });
        };

        var set_year = function(value){
            current_year.text(value);
        };

        var get_data = function(url){
            _alert('info', 'Aguarde, por favor...');
            $.getJSON(url, {format:'json'}, function(r){
                try{
                    if(!r){return;}
                    var error = r.error;

                    if(!error.hasOwnProperty('id') || error.id > 0){
                        _alert('error', error.message);
                        return;
                    }

                    var data = r.response;

                    if(!data || !data.hasOwnProperty('list') || !data.list.length ){
                        _alert('error', e_not_found);
                        return;
                    }

                    var item, item_data, item_url, item_date, item_image_src, item_image_alt,
                        row_id = 1, items = data.list;
                    reset_events();
                    reset_months();

                    set_year(data.year);
                    set_month_by_id(data.month);

                    for(var a in items){
                        item_data = items[a];

                        try{
                            item_url = substitute(item_tmpl_url,
                                    item_data.url.value,
                                    item_data.url.track.category,
                                    item_data.url.track.action,
                                    item_data.url.track.label,
                                    item_data.url.title);
                        }catch(e){
                            item_url = '-';
                        }

                        try{
                            item_image_src = item_data.image.src;
                            item_image_alt = item_data.image.alt || item_data.title;
                        }catch(e){
                            item_image_src = data.image;
                            item_image_alt = item_data.title;
                        }

                        try{
                            item_date = item_data.date.replace(/(\s|0{2}):?/gi,'').split('-');
                            item_date = substitute('{1}/{2}/{3}',item_date[2],item_date[1],item_date[0]);
                        }catch(e){
                            item_date = '-';
                        }

                        item = substitute(item_tmpl,
                                item_data.token,
                                item_image_src,
                                item_image_alt,
                                item_data.title||'-',
                                item_date,
                                item_data.place||'-',
                                item_url,
                                item_data.phone||'-');

                        switch(row_id){
                            case 1: row_items_1.append(item); break;
                            case 2: row_items_2.append(item); break;
                            case 3: row_items_3.append(item); break;
                        }

                        row_id = (row_id > 2) ? 1 : (row_id+1);
                    } _alert('success', 'La lista de eventos fue cargada exitosamente.');
                }catch(e){
                    _alert('success', 'Se produjo un error no controlado.');
                }
            }).complete(function(){
                $('.js-ga-track').unbind('click', track_links).bind('click', track_links);
                $('body').scrollTop(0);
            }).error(function(e){
                _alert('error', e_not_found + substitute('<br>HTTP/E: {1}, MESSAGE: {2}', e.status, e.statusText));
            });
        };

        var d = new Date(), year = 2013, month = get_month_by_id(d.getMonth()+1);
        get_data('/data/events/'+year+'/'+month+'.json');

    })();
</script>
</body>
</html>