#!/usr/bin/env python
# -*- coding: utf-8 -*-
# Copyright (c) 2013 Asumi Kamikaze Inc.
# Copyright (c) 2013 The Octopus Apps Inc.
# Licensed under the Apache License, Version 2.0 (the "License")
# Author: Alejandro M. Bernardis
# Email: alejandro.bernardis at gmail.com
# Created: 15/Nov/2013 10:30

import re
from array import array

# : ----------------------------------------------------------------------------

DEFAULT_TABLE = (
    ("A", 0, 0, 0, 0, 0),
    ("B", 0, 0, 0, 0, 0),
    ("C", 0, 0, 0, 0, 0),
    ("D", 0, 0, 0, 0, 0),
    ("E", 0, 0, 0, 0, 0),
    ("F", 0, 0, 0, 0, 0),
    ("G", 0, 0, 0, 0, 0),
    ("H", 0, 0, 0, 0, 0),
    ("I", 0, 0, 0, 0, 0),
    ("J (Game)", 0, 0, 0, 0, 0),
    ("K (Free Spins)", 0, 0, 0, 0, 0),
    ("L (Wildcard)", 0, 0, 0, 0, 0),
    ("", 0, 0, 0, 0, 0),
)

DEFAULT_PAYTABLE = (
    ('Banda Ancha', {
        'A': (0, 0, 4, 20, 80),
        'B': (0, 0, 5, 25, 90),
        'C': (0, 0, 8, 35, 95),
        'D': (0, 0, 13, 45, 100),
        'E': (0, 0, 18, 70, 150),
        'F': (0, 0, 24, 95, 180),
        'G': (0, 2, 30, 130, 250),
        'H': (0, 3, 35, 200, 450),
        'I': (0, 4, 45, 240, 900),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 50, 500, 2000),
    }, 10,),
    ('Fiesta Animal', {
        'A': (0, 0, 3, 20, 50),
        'B': (0, 0, 5, 20, 60),
        'C': (0, 0, 9, 30, 100),
        'D': (0, 0, 14, 45, 120),
        'E': (0, 0, 19, 80, 160),
        'F': (0, 0, 24, 95, 210),
        'G': (0, 3, 31, 135, 280),
        'H': (0, 3, 38, 200, 350),
        'I': (0, 4, 50, 200, 700),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 50, 500, 2000),
    }, 15,),
    ('La Taberna del Monstruo', {
        'A': (0, 0, 4, 20, 60),
        'B': (0, 0, 5, 25, 90),
        'C': (0, 0, 10, 20, 100),
        'D': (0, 0, 14, 50, 140),
        'E': (0, 0, 18, 70, 180),
        'F': (0, 2, 24, 100, 260),
        'G': (0, 2, 30, 160, 450),
        'H': (0, 3, 35, 200, 1000),
        'I': (0, 4, 50, 800, 5000),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 6, 60, 600, 6000),
    }, 20,),
    ('Rockeros', {
        'A': (0, 0, 5, 15, 70),
        'B': (0, 0, 5, 20, 90),
        'C': (0, 0, 8, 30, 110),
        'D': (0, 0, 10, 55, 180),
        'E': (0, 0, 12, 65, 250),
        'F': (0, 2, 15, 85, 340),
        'G': (0, 2, 18, 100, 500),
        'H': (0, 5, 25, 115, 700),
        'I': (0, 6, 50, 145, 1300),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 60, 600, 3000),
    }, 20,),
    (u'Ataque Alienígena', {
        'A': (0, 0, 4, 30, 90),
        'B': (0, 0, 5, 30, 100),
        'C': (0, 0, 8, 40, 150),
        'D': (0, 0, 10, 50, 220),
        'E': (0, 0, 13, 60, 280),
        'F': (0, 2, 18, 85, 350),
        'G': (0, 2, 25, 95, 500),
        'H': (0, 3, 30, 140, 700),
        'I': (0, 5, 40, 200, 1000),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 60, 600, 3000),
    }, 25,),
    ('Lucha Machine', {
        'A': (0, 0, 4, 15, 75),
        'B': (0, 0, 4, 25, 120),
        'C': (0, 0, 9, 30, 170),
        'D': (0, 0, 11, 40, 200),
        'E': (0, 0, 15, 45, 280),
        'F': (0, 2, 18, 70, 320),
        'G': (0, 2, 25, 90, 380),
        'H': (0, 3, 30, 130, 550),
        'I': (0, 4, 50, 300, 1500),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 50, 300, 3000),
    }, 25,),
    ('Vikingos', {
        'A': (0, 0, 4, 15, 70),
        'B': (0, 0, 5, 40, 80),
        'C': (0, 0, 10, 25, 110),
        'D': (0, 0, 14, 40, 165),
        'E': (0, 0, 18, 70, 190),
        'F': (0, 2, 25, 100, 230),
        'G': (0, 3, 31, 140, 310),
        'H': (0, 4, 38, 200, 500),
        'I': (0, 5, 45, 400, 4000),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 50, 1000, 5000),
    }, 30,),
    ('Sr. Ardilla', {
        'A': (0, 0, 3, 20, 80),
        'B': (0, 0, 4, 25, 90),
        'C': (0, 0, 7, 30, 150),
        'D': (0, 0, 11, 50, 190),
        'E': (0, 0, 12, 60, 240),
        'F': (0, 2, 15, 70, 350),
        'G': (0, 2, 20, 90, 500),
        'H': (0, 4, 30, 130, 600),
        'I': (0, 6, 40, 300, 5000),
        'J': (0, 0, 1, 2, 3),
        'K': (0, 0, 5, 10, 15),
        'L': (0, 5, 80, 800, 8000),
    }, 30,),
)

ROULETTE_SLOT_MODE = 'slot'
ROULETTE_SLOT_TOLERANCE = .000001
ROULETTE_SLOT_PROBABILITY = (
    0.20,
    0.22,
    0.17,
    0.14,
    0.10,
    0.06,
    0.05,
    0.04,
    0.015,
    0.005,
)
ROULETTE_SLOT_PAYTABLE = (
    (20,  30,  40,),
    (40,  60,  80,),
    (50,  15,  20,),
    (50,  75,  100,),
    (70,  105, 140,),
    (90,  135, 180,),
    (150, 225, 300,),
    (200, 300, 400,),
    (300, 450, 600,),
    (400, 600, 800,),
)

# : ----------------------------------------------------------------------------

HEADER_TABLE = (
    ('Character', 100,),
    ('1', 36,),
    ('2', 36,),
    ('3', 36,),
    ('4', 36,),
    ('5', 36,),
)

DEFAULT_BETS = (
    2000,
    1000,
    500,
    300,
    250,
    200,
    150,
    100,
    50,
    25,
    20,
    10,
    5,
    2,
    1,
    .75,
    .5,
    .25,
)

DEFAULT_BETS_ASC = (
    .25,
    .5,
    .75,
    1,
    2,
    5,
    10,
    20,
    25,
    50,
    100,
    150,
    200,
    250,
    300,
    500,
    1000,
    2000,
)

DEFUALT_PAYTABLE_LINES = (
    (1, 1, 1, 1, 1),
    (0, 0, 0, 0, 0),
    (2, 2, 2, 2, 2),
    (0, 1, 1, 1, 1),
    (2, 1, 0, 1, 2),
    (0, 1, 2, 1, 0),
    (0, 1, 1, 1, 0),
    (2, 1, 1, 1, 2),
    (0, 1, 0, 1, 0),
    (2, 1, 2, 1, 2),
    (1, 2, 1, 0, 1),
    (1, 0, 1, 2, 1),
    (0, 0, 1, 2, 2),
    (2, 2, 1, 0, 0),
    (0, 0, 2, 0, 0),
    (2, 2, 0, 2, 2),
    (1, 0, 2, 0, 1),
    (1, 2, 0, 2, 1),
    (0, 2, 0, 2, 0),
    (2, 0, 2, 0, 2),
    (0, 2, 1, 0, 2),
    (2, 0, 1, 2, 0),
    (0, 2, 2, 2, 0),
    (2, 0, 0, 0, 2),
    (1, 1, 0, 1, 1),
    (1, 1, 2, 1, 1),
    (0, 0, 0, 1, 2),
    (2, 2, 2, 1, 0),
    (0, 2, 1, 0, 0),
    (2, 0, 1, 2, 2),
)

DEFAULT_RAILS = (
    array('c', 'ABCCDDEEEEFFFFFGGGGGGHHHIIIIJKLL'),
    array('c', 'AAABBCCCCDDDDEEEEFFFFFGGHHHIIJKL'),
    array('c', 'AAABBCCCDDDDDDEEEEEEFFGGHHHIIJKL'),
    array('c', 'ABBBBBBCCDDDDEFFFFFFGGHHHIIIIJKL'),
    array('c', 'ABBBCCDDDEEFGGGGGHHHHHIIIIIIJKLL'),
)

DEFAULT_PAYTABLE_CHARS = {
    'A': (0, 0, 1, 10, 100),
    'B': (0, 0, 1, 10, 100),
    'C': (0, 0, 1, 10, 100),
    'D': (0, 0, 1, 10, 100),
    'E': (0, 0, 1, 10, 100),
    'F': (0, 0, 1, 10, 100),
    'G': (0, 0, 1, 10, 100),
    'H': (0, 0, 1, 10, 100),
    'I': (0, 0, 1, 10, 100),
    'J': (0, 0, 0, 0, 0),
    'K': (0, 0, 0, 0, 0),
    'L': (0, 0, 0, 0, 10000),
}

BONUS_TIME = 3
BONUS_TIMES = 3
GAME_CHAR = 'J'
FREE_SPINS_CHAR = 'K'
WILDCARD_CHAR = 'L'
IGNORE_CHARS = FREE_SPINS_CHAR + GAME_CHAR
GAME_VALIDATE = re.compile(r'^J+', re.I)
WILDCARD_VALIDATE = re.compile(r'^L+', re.I)
MPOS = (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,)
MCOLS = (0, 1, 2, 3, 4,)
CHARACTERS = 'ABCDEFGHIJKL'
CHARACTERS_SUM = 32
DEVICE_MIN_LEVEL = 1
DEVICE_MAX_LEVEL = 139

DEVICE_LEVELS = (
    (1, 0, 0, 2, 10, 50),
    (2, 250, 50, 5, 15, 50),
    (3, 1000, 100, 10, 15, 75),
    (4, 2500, 150, 20, 20, 75),
    (5, 5500, 200, 20, 20, 75),
    (6, 10000, 300, 25, 20, 75),
    (7, 17500, 400, 25, 20, 75),
    (8, 27500, 500, 50, 25, 75),
    (9, 40000, 600, 50, 25, 75),
    (10, 55000, 700, 50, 25, 75),
    (11, 73000, 800, 50, 25, 100),
    (12, 94000, 900, 50, 30, 100),
    (13, 118000, 1000, 50, 30, 100),
    (14, 146000, 1100, 50, 30, 100),
    (15, 178000, 1200, 100, 30, 100),
    (16, 214000, 1300, 100, 25, 100),
    (17, 254000, 1400, 100, 25, 100),
    (18, 299000, 1500, 150, 30, 100),
    (19, 350000, 1600, 150, 30, 100),
    (20, 404000, 1700, 150, 30, 100),
    (21, 464000, 1800, 150, 30, 100),
    (22, 530000, 1900, 150, 25, 150),
    (23, 600000, 2000, 200, 25, 150),
    (24, 680000, 2100, 200, 30, 150),
    (25, 770000, 2200, 200, 30, 150),
    (26, 870000, 2300, 200, 30, 150),
    (27, 985000, 2400, 200, 30, 150),
    (28, 1115000, 2500, 250, 25, 150),
    (29, 1260000, 2600, 250, 25, 200),
    (30, 1420000, 2700, 250, 30, 200),
    (31, 1600000, 2800, 250, 30, 200),
    (32, 1800000, 2900, 250, 30, 200),
    (33, 2020000, 3000, 250, 30, 200),
    (34, 2270000, 3100, 250, 30, 200),
    (35, 2520000, 3200, 300, 30, 200),
    (36, 2770000, 3300, 300, 30, 200),
    (37, 3020000, 3400, 300, 30, 200),
    (38, 3320000, 3500, 300, 30, 300),
    (39, 3620000, 3600, 300, 30, 300),
    (40, 3920000, 3700, 500, 30, 300),
    (41, 4220000, 3800, 500, 30, 300),
    (42, 4570000, 3900, 500, 30, 300),
    (43, 4920000, 4000, 500, 30, 300),
    (44, 5270000, 4100, 500, 30, 300),
    (45, 5620000, 4200, 500, 30, 400),
    (46, 6020000, 4300, 500, 30, 400),
    (47, 6420000, 4400, 500, 30, 400),
    (48, 6820000, 4500, 1000, 30, 400),
    (49, 7220000, 4600, 1000, 30, 400),
    (50, 7670000, 4700, 1000, 30, 400),
    (51, 8120000, 4800, 1000, 30, 500),
    (52, 8570000, 4900, 1000, 30, 500),
    (53, 9020000, 5000, 1000, 30, 500),
    (54, 9520000, 5100, 1000, 30, 500),
    (55, 10020000, 5200, 1000, 30, 500),
    (56, 10520000, 5300, 1000, 30, 500),
    (57, 11020000, 5400, 1000, 30, 500),
    (58, 11570000, 5500, 1000, 30, 500),
    (59, 12120000, 5600, 1000, 30, 500),
    (60, 12670000, 5700, 1000, 30, 500),
    (61, 13220000, 5800, 1000, 30, 500),
    (62, 13820000, 5900, 1000, 30, 750),
    (63, 14420000, 6000, 1000, 30, 750),
    (64, 15020000, 6100, 1000, 30, 750),
    (65, 15620000, 6200, 1000, 30, 750),
    (66, 16320000, 6300, 1000, 30, 750),
    (67, 17020000, 6400, 1000, 30, 1000),
    (68, 17720000, 6500, 1000, 30, 1000),
    (69, 18420000, 6600, 1000, 30, 1000),
    (70, 19220000, 6700, 1000, 30, 1000),
    (71, 20020000, 6800, 1000, 30, 1000),
    (72, 20820000, 6900, 1000, 30, 1000),
    (73, 21620000, 7000, 1000, 30, 1000),
    (74, 22520000, 7100, 1000, 30, 1500),
    (75, 23420000, 7200, 1000, 30, 1500),
    (76, 24320000, 7300, 1000, 30, 1500),
    (77, 25220000, 7400, 1000, 30, 1500),
    (78, 26220000, 7500, 1000, 30, 1500),
    (79, 27220000, 7600, 1000, 30, 1500),
    (80, 28220000, 7700, 1000, 30, 2000),
    (81, 29220000, 7800, 1000, 30, 2000),
    (82, 30320000, 7900, 1000, 30, 2000),
    (83, 31420000, 8000, 1000, 30, 2000),
    (84, 32520000, 8100, 1000, 30, 2000),
    (85, 33620000, 8200, 1000, 30, 2000),
    (86, 34720000, 8300, 1000, 30, 3000),
    (87, 35920000, 8400, 1000, 30, 3000),
    (88, 37120000, 8500, 1000, 30, 3000),
    (89, 38320000, 8600, 1000, 30, 3000),
    (90, 39520000, 8700, 1000, 30, 3000),
    (91, 40720000, 8800, 1000, 30, 3000),
    (92, 42020000, 8900, 1000, 30, 3000),
    (93, 43320000, 9000, 1000, 30, 4000),
    (94, 44620000, 9100, 1000, 30, 4000),
    (95, 45920000, 9200, 1000, 30, 4000),
    (96, 47220000, 9300, 1000, 30, 4000),
    (97, 48620000, 9400, 2000, 30, 4000),
    (98, 50020000, 9500, 2000, 30, 4000),
    (99, 51420000, 10000, 2000, 30, 4000),
    (100, 52820000, 10500, 2000, 30, 4000),
    (101, 54220000, 11000, 2000, 30, 5000),
    (102, 55720000, 11500, 2000, 30, 5000),
    (103, 57220000, 12000, 2000, 30, 5000),
    (104, 58720000, 13000, 2000, 30, 5000),
    (105, 60220000, 14000, 2000, 30, 5000),
    (106, 61720000, 15000, 2000, 30, 5000),
    (107, 63220000, 16000, 2000, 30, 5000),
    (108, 64720000, 17000, 2000, 30, 5000),
    (109, 66220000, 18000, 2000, 30, 5000),
    (110, 67720000, 19000, 2000, 30, 5000),
    (111, 69220000, 20000, 2000, 30, 5000),
    (112, 70820000, 21000, 2000, 30, 5000),
    (113, 72420000, 22000, 2000, 30, 5000),
    (114, 74020000, 23000, 2000, 30, 5000),
    (115, 75620000, 24000, 2000, 30, 6000),
    (116, 77220000, 25000, 2000, 30, 6000),
    (117, 78820000, 26000, 2000, 30, 6000),
    (118, 80420000, 27000, 2000, 30, 6000),
    (119, 82020000, 28000, 2000, 30, 6000),
    (120, 83620000, 29000, 2000, 30, 6000),
    (121, 85220000, 30000, 2000, 30, 6000),
    (122, 86920000, 31000, 2000, 30, 6000),
    (123, 88620000, 32000, 2000, 30, 6000),
    (124, 90320000, 33000, 2000, 30, 6000),
    (125, 92020000, 34000, 2000, 30, 6000),
    (126, 93720000, 35000, 2000, 30, 6000),
    (127, 95420000, 36000, 2000, 30, 6000),
    (128, 97120000, 37000, 2000, 30, 6000),
    (129, 98820000, 38000, 2000, 30, 7000),
    (130, 100520000, 39000, 2000, 30, 7000),
    (131, 102320000, 40000, 2000, 30, 7000),
    (132, 104120000, 41000, 2000, 30, 7000),
    (133, 105920000, 42000, 2000, 30, 7000),
    (134, 107720000, 43000, 2000, 30, 7000),
    (135, 109520000, 44000, 2000, 30, 7000),
    (136, 111320000, 45000, 2000, 30, 7000),
    (137, 113120000, 46000, 2000, 30, 7000),
    (138, 114920000, 47000, 2000, 30, 8000),
    (139, 116720000, 48000, 2000, 30, 8000),
)

DEFAULT_REPORT = [
    [u'Reporte: #', '', '', '', ''],
    ['', '', '', '', ''],
    [u'Iteraciones', '0', '', '', ''],
    [u'Giros', '0', '', '', ''],
    [u'Finalizó en', '0', '', '', ''],
    [u'Balance', '0', '', '', ''],
    [u'Ganancia', '0', '', '', ''],
    ['', '', '', '', ''],
    [u'Giros ganadores', '0', '', '', ''],
    [u'Giros perdedores', '0', '', '', ''],
    ['', '', '', '', ''],
    [u'Dinero pagado por Combos', '0', '', '', ''],
    [u'Dinero pagado por Giros Gratis (K)', '0', '', '', ''],
    [u'Dinero Pagado por Juego (J)', '0', '', '', ''],
    [u'Suma de Dinero Pagado', '0', '', '', ''],
    ['', '', '', '', ''],
    [u'Suma de Dinero Apostado', '0', '', '', ''],
    ['', '', '', '', ''],
    [u'Combos', u'Veces que salió',
     u'% de Veces que salió/Total de Veces que salió cualquier combo',
     u'Dinero que pagó',
     u'% de Dinero total que se pagó/Total de dinero pagado por combos'],
    [u'x2', '0', '0', '0', '0'],
    [u'x3', '0', '0', '0', '0'],
    [u'x4', '0', '0', '0', '0'],
    [u'x5', '0', '0', '0', '0'],
    [u'Total', '0', '', '0', ''],
    ['', '', '', '', ''],
    [u'Giros Gratis', '', '', '', ''],
    [u'Veces que se activaron', '0', '', '', ''],
    [u'% de: veces que salió/Giros Totales', '0', '', '', ''],
    [u'Veces que sale en 100 giros', '0', '', '', ''],
    [u'Giros Gratis otorgados', '0', '', '', ''],
    [u'Dinero que se pagó por giros gratis', '0', '', '', ''],
    [u'% de: dinero pagado por Giros Gratis/Suma de dinero total pagado',
     '0', '', '', ''],
    ['', '', '', '', ''],
    [u'Juego', '', '', '', ''],
    [u'Veces que se activó', '0', '', '', ''],
    [u'% de veces que salió/Giros Totales', '0', '', '', ''],
    [u'Veces que sale en 100 giros', '0', '', '', ''],
    [u'Dinero que se pagó por Juego', '0', '', '', ''],
    [u'% de: dinero pagado por Juego/Suma de dinero total pagado',
     '0', '', '', ''],
    ['', '', '', '', ''],
    [u'Giros Gratis + Juego', '', '', '', ''],
    [u'Veces que se activaron', '0', '', '', ''],
    [u'% de veces que salieron/Giros Totales', '0', '', '', ''],
    [u'Veces que salen en 100 giros', '0', '', '', ''],
    [u'Dinero que se pagó por K + J', '0', '', '', ''],
    [u'% de: dinero pagado por K + J/Suma de dinero total pagado',
     '0', '', '', '']
]
